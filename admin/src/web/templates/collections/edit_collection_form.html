{% extends "layout.html" %}

{% block title %}Editar Cobro{% endblock %}

{% block head %}
    {{ super() }}
{% endblock %}

{% block content %}
    <h1>Editar Informaci√≥n del Cobro</h1>

    {% if form.errors %}
        <div class="errors">
            <ul>
                {% for field, errors in form.errors.items() %}
                    {% for error in errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    <form method="POST" action="{{ url_for('collections.edit_collection', collection_id=collection.id) }}">
        <div>
            <label for="rider_dni">J&A (DNI):</label>
            <input type="text" id="rider_dni" name="rider_dni" value="{{ collection.rider.dni }}" required>
        </div>

        <div>
            <label for="payment_date">Fecha de Pago:</label>
            <input type="date" id="payment_date" name="payment_date" value="{{ form.payment_date.data.strftime('%Y-%m-%d') if form.payment_date.data else collection.payment_date.strftime('%Y-%m-%d') }}" required>
        </div>

        <div>
            <label for="payment_method">Metodo de Pago:</label>
            <select id="payment_method" name="payment_method" required>
                <option value="EFECTIVO" {% if form.payment_method.data == 'EFECTIVO' %}selected{% endif %}>Efectivo</option>
                <option value="TARJETA DE CREDITO" {% if form.payment_method.data == 'TARJETA DE CREDITO' %}selected{% endif %}>Tarjeta de Credito</option>
                <option value="TARJETA DE DEBITO" {% if form.payment_method.data == 'TARJETA DE DEBITO' %}selected{% endif %}>Tarjeta de Debito</option>
                <option value="TRANSFERENCIA" {% if form.payment_method.data == 'TRANSFERENCIA' %}selected{% endif %}>Transferencia</option>
            </select>
        </div>

        <div>
            <label for="amount">Monto:</label>
            <input type="number" id="amount" name="amount" step="0.01" value="{{ collection.amount }}" required>
        </div>

        <div>
            <label for="observations">Observaciones:</label>
            <textarea id="observations" name="observations">{{ form.observations.data if form.observations.data else '' }}</textarea>
        </div>

        <div>
            <label for="team_member_id">Miembro del equipo (Email):</label>
            <input type="email" id="team_member_id" name="team_member_id" value="{{ collection.teammember.email if collection.teammember else '' }}" required>
        </div>

        <button type="submit">Actualizar Cobro</button>
    </form>

    <a href="{{ url_for('collections.index_collections') }}">
        <button type="button">Volver a listado de cobros</button>
    </a>
{% endblock %}
