{% extends "layout.html" %}

{% block title %}Editar Cobro{% endblock %}

{% block head %}
    {{ super() }}
{% endblock %}

{% block content %}
    <h1>Editar Informaci√≥n del Cobro</h1>

    <form method="POST" action="{{ url_for('collections.edit_collection', collection_id=collection.id) }}">
        <div>
            <label for="rider_dni">J&A (DNI):</label>
            <input type="text" id="rider_dni" name="rider_dni" value="{{ collection.rider.dni }}" required>
        </div>

        <div>
            <label for="payment_date">Fecha de Pago:</label>
            <input type="date" id="payment_date" name="payment_date" value="{{ collection.payment_date.strftime('%Y-%m-%dT%H:%M') }}" required>
        </div>

        <div>
            <label for="payment_method">Metodo de Pago:</label>
            <select id="payment_method" name="payment_method" required>
                <option value="EFECTIVO" {% if collection.payment_method == 'EFECTIVO' %}selected{% endif %}>Efectivo</option>
                <option value="TARJETA DE CREDITO" {% if collection.payment_method == 'TARJETA DE CREDITO' %}selected{% endif %}>Tarjeta de Credito</option>
                <option value="TARJETA DE DEBITO" {% if collection.payment_method == 'TARJETA DE DEBITO' %}selected{% endif %}>Tarjeta de Debito</option>
                <option value="TRANSFERENCIA" {% if collection.payment_method == 'TRANSFERENCIA' %}selected{% endif %}>Transferencia</option>
            </select>
        </div>

        <div>
            <label for="amount">Monto:</label>
            <input type="number" id="amount" name="amount" step="0.01" value="{{ collection.amount }}" required>
        </div>

        <div>
            <label for="observations">Observaciones:</label>
            <textarea id="observations" name="observations">{{ collection.observations }}</textarea>
        </div>

        <div>
            <label for="team_member_id">Miembro del equipo (Email):</label>
            <input type="email" id="team_member_id" name="team_member_id" value="{{ collection.teammember.email if collection.teammember else '' }}" required>
        </div>

        <div>
            <label for="debt">Debe:</label>
            <input type="checkbox" id="debt" name="debt" value="True" {% if collection.debt %}checked{% endif %}>
        </div>

        <button type="submit">Actualizar Cobro</button>
    </form>

    <a href="{{ url_for('collections.index_collections') }}">
        <button type="button">Volver a listado de cobros</button>
    </a>
{% endblock %}
