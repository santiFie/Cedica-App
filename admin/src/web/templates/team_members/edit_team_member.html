{% extends 'layout.html' %}

{% block title %}Editar Miembro del Equipo{% endblock %}

{% block head %}
    {{ super() }}
{% endblock %}

{% block content %}

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <ul>
            {% for category, message in messages %}
                <li class="{{ category }}">{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}
    {% endwith %}

    <h1>Editar Miembro del Equipo</h1>
    <form action="{{ url_for('team_members.team_member_update', team_member_email = team_member.email) }}" method="post" enctype="multipart/form-data">
        <div>
            <label for="name">Nombre:</label>
            <input type="text" id="name" name="name" value="{{ team_member.name }}">
        </div>
        <div>
            <label for="last_name">Apellido:</label>
            <input type="text" id="last_name" name="last_name" value="{{ team_member.last_name }}">
        </div>
        <div>
            <label for="address">Direccion:</label>
            <input type="text" id="address" name="address" value="{{ team_member.address }}">
        </div>
        <div>
            <label for="locality">Localidad:</label>
            <input type="text" id="locality" name="locality" value="{{ team_member.locality }}">
        </div>
        <div>
            <label for="phone">Telefono:</label>
            <input type="text" id="phone" name="phone" value="{{ team_member.phone }}">
        </div>
        <div>
            <label for="end_date">Fecha de cese:</label>
            <input type="date" id="end_date" name="end_date" value="{{ team_member.end_date }}">
        </div>
        <div>
            <label for="emergency_contact">Contacto de Emergencia:</label>
            <input type="text" id="emergency_contact" name="emergency_contact" value="{{ team_member.emergency_contact }}">
        </div>
        <div>
            <label for="emergency_phone">Telefono del contacto de Emergencia:</label>
            <input type="text" id="emergency_phone" name="emergency_phone" value="{{ team_member.emergency_phone }}">
        </div>


        <label for="health_insurance">Obra Social:</label>
        <select name="health_insurance" id="health_insurance">
            {% for insurance in health_insurances %}
                <option value="{{ insurance.id }}" 
                {% if insurance.id == team_member.health_insurance_id %} selected {% endif %}>
                    {{ insurance.name }}
                </option>
            {% endfor %}
        </select>

        <div>
            <label for="health_insurance_number">Numero de afiliado obra social:</label>
            <input type="text" id="health_insurance_number" name="health_insurance_number" value="{{ team_member.health_insurance_number }}">
        </div>


        <label for="condition">Condición:</label>
                <select id="condition" name="condition">
                    {% for condition in conditions %}
                        <option value="{{ condition }}">{{ condition }}</option>
                    {% endfor %}
                </select>

        <label for="job_position">Posición de Trabajo:</label>
            <select id="job_position" name="job_position" required>
                {% for job in jobs %}
                    <option value="{{ job }}">{{ job }}</option>
                {% endfor %}
            </select>

        <label for="profession">Profesión:</label>
            <select id="profession" name="profession" required>
                {% for profession in professions %}
                    <option value="{{ profession }}">{{ profession }}</option>
                {% endfor %}
            </select>


        <div>
            <label for="title">Titulo:</label>
            <input type="file" id="files" name="title" enctype="multipart/form-data">
        </div>

        <div>
            <label for="dni_copy">Copia DNI:</label>
            <input type="file" id="files" name="dni_copy" enctype="multipart/form-data">
        </div>

        <div>
            <label for="cv">CV :</label>
            <input type="file" id="files" name="cv" enctype="multipart/form-data">
        </div>
        <div>
            <button type="submit">Guardar</button>
        </div>
    </form>


{% endblock %}